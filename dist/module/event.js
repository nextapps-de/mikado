import Mikado from"./mikado.js";{function a(a,b){b||(b=a.type);const c=a.target;let f=c,g=c["_event_"+b];if(!g){for(;f!==e;){if("click"===b&&h&&(g=f.getAttribute("tap")),g||(g=f.getAttribute(b)),g){const a=g.indexOf(":");if(-1!==a){const b=g.substring(0,a),c=g.substring(a+1);for(g=0,f=f.parentElement;f!==e;){if(f.hasAttribute(c)){g=b;break}f=f.parentElement}}break}f=f.parentElement}if(!g)return;c["_event_"+b]=g,c["_root_"+b]=f}else f=c["_root_"+b];const i=d[g];!i||(a.preventDefault(),i(f,a,c)),a.stopPropagation()}function b(a,b,c,d){if("tap"===b){if(f||g)return void k(a);h=!0,b="click"}window[(a?"add":"remove")+"EventListener"](b,c,d||{passive:!0,capture:!0})}const c={},d={},e=document.body,f="ontouchstart"in window,g=!f&&window.PointerEvent&&navigator.maxTouchPoints;let h;Mikado.route=Mikado.prototype.route=function(a,b){return d[a]=b,this},Mikado.dispatch=Mikado.prototype.dispatch=function(a,b,c,e){return d[a](b,c,e),this};let i,j,k;if(f||g){function c(a){e(a,a.touches)}function d(b){let c=i,d=j;e(b,b.changedTouches),50>Math.abs(i-c)&&50>Math.abs(j-d)&&a.call(this,b,"tap")}function e(a,b){b&&(a=b[0]),i=a.clientX,j=a.clientY}k=function(a){b(a,g?"pointerdown":"touchstart",c,!1),b(a,g?"pointerup":"touchend",d,!1)}}Mikado.listen=Mikado.prototype.listen=function(d,e){return c[d]||(b(1,d,a,e||!0),c[d]=1),this},Mikado.unlisten=Mikado.prototype.unlisten=function(d,e){return c[d]&&(b(0,d,a,e||!0),c[d]=0),this}}